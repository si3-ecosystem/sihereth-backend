<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= landing.fullName.split(" ")[0] %>.siher.eth</title>
    <meta property="og:type" content="website" />
    <meta property="og:title" content="<%= landing.fullName %>" />
    <meta property="og:description" content="<%= landing.headline || 'Profile' %>" />
    <meta property="og:image" content="https://res.cloudinary.com/dv52zu7pu/image/upload/v1752182029/linkpreviewjpg_d1qhvu.jpg" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="<%= landing.fullName %>" />
    <meta name="twitter:description" content="<%= landing.headline || 'Profile' %>" />
    <meta name="twitter:image" content="https://res.cloudinary.com/dv52zu7pu/image/upload/v1752182029/linkpreviewjpg_d1qhvu.jpg" />
    <link rel="icon" href="https://res.cloudinary.com/dv52zu7pu/image/upload/v1751743817/favicon_ttmsyz.ico" type="image/x-icon" />
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <style>
      @font-face {
        font-family: "Sora";
        src: url("https://res.cloudinary.com/dv52zu7pu/raw/upload/v1751386802/Sora-Variable_misbzy.ttf") format("truetype");
        font-display: swap;
      }
      @font-face {
        font-family: "FiraMono";
        src: url("https://res.cloudinary.com/dv52zu7pu/raw/upload/v1751386820/FiraMono-Regular_icngzo.ttf") format("truetype");
        font-weight: 400;
        font-display: swap;
      }
      @font-face {
        font-family: "FiraMono";
        src: url("https://res.cloudinary.com/dv52zu7pu/raw/upload/v1751386820/FiraMono-Medium_vaygya.ttf") format("truetype");
        font-weight: 500;
        font-display: swap;
      }
      @font-face {
        font-family: "FiraMono";
        src: url("https://res.cloudinary.com/dv52zu7pu/raw/upload/v1751386820/FiraMono-Bold_eqfvz9.ttf") format("truetype");
        font-weight: 700;
        font-display: swap;
      }
      @font-face {
        font-family: "DMSans";
        src: url("https://res.cloudinary.com/dv52zu7pu/raw/upload/v1751386813/DMSans-Regular_bf7tpf.ttf") format("truetype");
        font-weight: 400;
        font-display: swap;
      }
      @font-face {
        font-family: "DMSans";
        src: url("https://res.cloudinary.com/dv52zu7pu/raw/upload/v1751386813/DMSans-Medium_hmfghb.ttf") format("truetype");
        font-weight: 500;
        font-display: swap;
      }
      @font-face {
        font-family: "DMSans";
        src: url("https://res.cloudinary.com/dv52zu7pu/raw/upload/v1751386813/DMSans-Bold_cz06ou.ttf") format("truetype");
        font-weight: 700;
        font-display: swap;
      }
      @font-face {
        font-family: "DMSans";
        src: url("https://res.cloudinary.com/dv52zu7pu/raw/upload/v1751386813/DMSans-SemiBold_n6h8d0.ttf") format("truetype");
        font-weight: 600;
        font-display: swap;
      }
      html { scroll-behavior: smooth; }
      body {
        color: #171717;
        background: #fff;
        font-family: "FiraMono", monospace;
        -ms-overflow-style: none;
      }
      ::-webkit-scrollbar { width: 8px; }
      ::-webkit-scrollbar-track { background: transparent; }
      ::-webkit-scrollbar-thumb {
        background-color: #c8bafd;
        border-radius: 10px;
        border: 2px solid transparent;
        background-clip: content-box;
      }
      * { scrollbar-width: thin; scrollbar-color: #c8bafd transparent; }
      body::-webkit-scrollbar { display: none; }
      .font-sora { font-family: "Sora", "DMSans", Arial, sans-serif; }
      .font-dmsans { font-family: "DMSans", Arial, sans-serif; }
      .font-firamono { font-family: "FiraMono", monospace; }
      .text-blue-primary { color: #3e21f3; }
      .bg-primary { background-color: #ece9fd; }
      .border-light-purple { border-color: #c8bafd; }
      .bg-light-purple { background-color: #c8bafd; }
      @keyframes marquee {
        0% { transform: translateX(0); }
        100% { transform: translateX(-50%); }
      }
      @keyframes scroll-marquee {
        0% { transform: translateX(0%); }
        100% { transform: translateX(-25%); }
      }
      .animate-marquee { animation: marquee 20s linear infinite; }
      .marquee-track { animation: scroll-marquee 12s linear infinite; }
      .cryptoButton:hover { background-color: #7E5BFF; color: white; }
      .hashtag-hover:hover {
        color: #e5e7eb;
        background-color: #1f2937;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        transition: all 0.5s ease-out;
      }
      .card-wrapper {
        background-color: white;
        padding: 1rem;
        width: 100%;
        border-radius: 1rem;
        border: 1px solid #c8bafd;
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        gap: 0.75rem;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
        transition: box-shadow 0.3s ease-in-out;
      }
      .card-wrapper:hover { box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1); }
      .tag-box {
        font-size: 0.875rem;
        min-width: 6rem;
        max-width: fit-content;
        padding: 0.75rem 1rem;
        border-radius: 0.75rem;
        background-color: #ece9fd;
        text-transform: capitalize;
        transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;
      }
      .group:hover .tag-box { background-color: #1f2937; color: white; }
      .heading-text {
        font-family: "Sora", sans-serif;
        font-size: 1.25rem;
        font-weight: 500;
      }
      .marquee-wrapper {
        overflow: hidden;
        white-space: nowrap;
        background: #0f1524;
        height: 3rem;
        display: flex;
        align-items: center;
      }
      .marquee-track { display: inline-flex; }
      .slider-item {
        display: flex;
        align-items: center;
        color: white;
        text-transform: uppercase;
        font-size: 0.875rem;
        letter-spacing: 0.05em;
        padding: 0 1rem;
        white-space: nowrap;
        flex-shrink: 0;
      }
      .dot {
        width: 0.5rem;
        height: 0.5rem;
        background-color: white;
        border-radius: 9999px;
        margin-left: 1rem;
      }
      .section-header {
        padding: 0.75rem 1rem;
        background-color: #ece9fd;
        border: 1px solid #c8bafd;
        border-radius: 0.75rem;
        font-weight: 500;
        font-size: 0.875rem;
        width: fit-content;
      }
      .people-ticker-track {
        display: inline-flex;
        animation: people-ticker-scroll 40s linear infinite;
        white-space: nowrap;
      }
      @keyframes people-ticker-scroll {
        0% { transform: translateX(0%); }
        100% { transform: translateX(-50%); }
      }
    </style>
  </head>

  <body class="text-gray-900 bg-white">
    <!-- Navigation -->
    <section class="border-b border-gray-500 bg-[linear-gradient(90deg,_#FFF_0%,_#D5D5F7_59%,_#F1EFFF_100%)] p-4 relative text-md">
      <div class="flex justify-between items-center mx-auto max-w-[90rem]">
        <img src="https://res.cloudinary.com/dv52zu7pu/image/upload/v1751386801/si3_ykl61i.svg" width="100" height="80" alt="logo" />
        <!-- Desktop Navigation -->
        <div class="hidden flex-1 md:flex justify-center items-center leading-4">
          <div class="flex items-center gap-10">
            <% const navItems = ["Value", "Media", "Timeline", "Connect"]; %>
            <% navItems.forEach(item => { %>
            <a href="#<%= item.toLowerCase() %>" class="font-semibold font-sora transition-all duration-300 hover:text-light-purple">
              <%= item %>
            </a>
            <% }) %>
          </div>
        </div>

        <!-- Mobile Menu -->
        <button type="button" onclick="toggleMobileNav()" class="md:hidden focus:outline-none z-50 relative" aria-label="Toggle menu">
          <i id="menuIcon" class="fas fa-bars text-2xl"></i>
        </button>
        
        <div id="mobileNav" class="fixed inset-0 bg-black/80 backdrop-blur-md transform translate-x-full transition-transform duration-300 ease-in-out md:hidden flex flex-col items-center justify-center space-y-6 z-40">
          <button type="button" onclick="toggleMobileNav()" class="absolute top-10 right-10 text-white md:hidden focus:outline-none z-50" aria-label="Toggle menu">
            <i class="fas fa-times text-2xl"></i>
          </button>
          <% navItems.forEach(item => { %>
          <a href="#<%= item.toLowerCase() %>" class="font-semibold text-white transition-all hover:text-light-purple" onclick="toggleMobileNav()">
            <%= item %>
          </a>
          <% }) %>
        </div>
      </div>
    </section>

    <!-- Landing Section -->
    <div class="px-4 py-6 text-xs">
      <div class="max-w-[90rem] mx-auto grid grid-cols-1 md:grid-cols-3 gap-4">
        <!-- Left Side -->
        <div class="w-full space-y-4 flex flex-col col-span-1 md:col-span-2 justify-center items-start">
          <!-- Hero Text -->
          <div class="font-sora font-bold text-[2.8rem] sm:text-[3.3rem] lg:text-[3.8rem] leading-[3.2rem] sm:leading-[3.8rem] lg:leading-[4.5rem] tracking-wide">
            <span>I'm </span>
            <span class="text-blue-primary"><%= landing.fullName.trim().split(" ")[0] %></span>
            <span>, </span>
            <span><%= landing.headline ?? "" %></span>
          </div>

          <!-- Hashtags -->
          <section class="flex flex-wrap gap-3 font-medium pb-2">
            <% (landing.hashTags || []).forEach(hashtag => { %>
            <div class="bg-primary tracking-wider whitespace-nowrap py-2 px-3 md:py-3 md:px-4 rounded-2xl hashtag-hover transition-all ease-out duration-500 cursor-default">
              #<%= hashtag.toUpperCase() %>
            </div>
            <% }) %>
          </section>

          <!-- Information Section -->
          <section class="p-3 space-y-3 md:space-y-4 overflow-hidden bg-gray-100 border border-gray-200 w-full rounded-lg">
            <% const infoFields = [
              { label: "Title:", value: landing.title },
              { label: "Presently based in:", value: landing.region }
            ]; %>
            
            <% infoFields.forEach(field => { %>
            <div class="flex gap-2 font-medium">
              <div class="text-blue-primary tracking-tight sm:tracking-wide font-medium w-1/3 whitespace-nowrap min-w-44">
                <%= field.label %>
              </div>
              <div class="cursor-default w-2/3 whitespace-nowrap overflow-hidden">
                <%= field.value %>
              </div>
            </div>
            <% }) %>

            <% const renderInfoRow = (title, valueArray) => { %>
            <div class="flex gap-2 font-medium">
              <div class="text-blue-primary tracking-tight sm:tracking-wide font-medium w-1/3 whitespace-nowrap min-w-44">
                <%= title %>
              </div>
              <div class="cursor-default w-2/3 whitespace-nowrap overflow-hidden">
                <% if (valueArray.length < 3) { %>
                  <%= valueArray.join(", ") %>
                <% } else { %>
                <div class="overflow-hidden w-[48rem] whitespace-nowrap">
                  <div class="flex animate-marquee">
                    <% valueArray.concat(valueArray, valueArray).forEach(item => { %>
                    <span class="mx-2 flex items-center">
                      <%= item %>
                      <div class="size-[0.3rem] bg-gray-800 rounded-full ml-4"></div>
                    </span>
                    <% }) %>
                  </div>
                </div>
                <% } %>
              </div>
            </div>
            <% } %>
            
            <%- renderInfoRow("Organization Affiliations:", landing.organizationAffiliations) %>
            <%- renderInfoRow("Community Affiliations:", landing.communityAffiliations) %>
            <%- renderInfoRow("Superpowers:", landing.superPowers) %>
          </section>
        </div>

        <!-- Profile Section -->
        <div class="w-full flex md:justify-end justify-center">
          <section class="relative aspect-[3/4] w-full max-w-[10rem] sm:max-w-xs md:max-w-sm rounded-2xl flex-shrink-0">
            <% if (landing.image) { %>
            <img src="<%= landing.image.replace(/`/g, '').trim() %>" alt="profile" class="rounded-2xl object-cover w-full h-full" />
            <% } %>
            <div class="rounded-2xl absolute right-0 lg:-right-2 -bottom-4 xl:-right-4 border border-light-purple p-4 flex flex-col justify-center items-center gap-1 md:gap-2 bg-primary shadow-md font-dmsans">
              <span class="font-medium text-base md:text-lg whitespace-nowrap">
                <%= landing.fullName %>
              </span>
              <span class="tracking-wider text-xs md:text-sm">
                <%= landing.pronoun ? `(${landing.pronoun.toLowerCase()})` : "" %>
              </span>
            </div>
          </section>
        </div>
      </div>
    </div>

    <!-- Slider Section -->
    <% const sliderLength = slider.length; 
       const estimatedItemWidth = 100;
       const screenWidth = 1920;
       const itemsPerLoop = Math.ceil((screenWidth * 2) / (estimatedItemWidth * sliderLength));
       // Repeat slider items 4 times for seamless loop
       const repeatedSlider = Array(4).fill(slider).flat(); %>
    <div class="marquee-wrapper">
      <div class="marquee-track">
        <% repeatedSlider.forEach(text => { %>
        <div class="slider-item">
          <%= text %>
          <div class="dot"></div>
        </div>
        <% }) %>
      </div>
    </div>

    <!-- Value Section -->
    <div class="p-4 py-10" id="value">
      <div class="max-w-[90rem] mx-auto grid grid-cols-1 sm:grid-cols-2 gap-10">
        <section class="flex flex-col items-center sm:items-start w-full space-y-6">
          <div class="section-header">MY EXPERIENCE SUMMARY</div>
          <p class="font-medium text-lg font-sora text-justify"><%= value.experience %></p>
        </section>
        <section class="flex flex-col items-center sm:items-start w-full space-y-6">
          <div class="section-header">MY VISION</div>
          <div class="font-medium text-lg font-sora text-justify"><%= value.values %></div>
        </section>
      </div>
    </div>

    <!-- Media Section -->
    <section id="media" class="bg-primary p-4 py-10 sm:py-16" aria-label="Media Section">
      <div class="max-w-[90rem] mx-auto space-y-8">
        <!-- Media content -->
        <% const mediaContent = () => { %>
          <% if (live.image && (live.video || live.url)) { %>
          <div class="relative bg-white rounded-2xl md:p-4 shadow-sm">
            <img src="https://res.cloudinary.com/dv52zu7pu/image/upload/v1751386807/border_qpdezn.png" alt="" width="500" height="500" class="absolute top-0 left-0 mx-auto w-full p-4" />
            <div class="md:mt-6 p-4 sm:p-6 md:p-8 grid grid-cols-1 md:grid-cols-2 gap-3 sm:gap-4 md:gap-6">
              <div class="relative w-full aspect-video overflow-hidden">
                <img src="<%= live.image %>" alt="" class="object-cover rounded-2xl w-full h-full" />
              </div>
              <%- renderMediaPlayer(live.video || live.url) %>
            </div>
          </div>
          <% } else if (live.image) { %>
          <div class="relative w-full aspect-video overflow-hidden col-span-full">
            <img src="<%= live.image %>" alt="" class="object-cover rounded-2xl w-full h-full" />
          </div>
          <% } else if (live.video || live.url) { %>
          <div class="w-full aspect-video col-span-full">
            <%- renderMediaPlayer(live.video || live.url) %>
          </div>
          <% } %>
        <% } %>

        <% const renderMediaPlayer = (mediaUrl) => { %>
          <% if (mediaUrl && mediaUrl.match(/\.(mp3|wav|ogg|aac|flac)$/i)) { %>
          <div class="w-full h-full flex flex-col rounded-2xl bg-gray-100 p-4 relative">
            <audio src="<%= mediaUrl %>" class="hidden" controls></audio>
            <button type="button" class="absolute inset-0 flex items-center justify-center bg-black bg-opacity-20 hover:bg-opacity-30 transition-all rounded-2xl">
              <div class="w-16 h-16 bg-blue-primary rounded-full flex items-center justify-center">
                <i class="fas fa-play text-white text-2xl"></i>
              </div>
            </button>
          </div>
          <% } else { %>
          <video src="<%= mediaUrl %>" class="w-full h-full object-cover rounded-2xl" playsinline muted autoplay loop></video>
          <% } %>
        <% } %>

        <%- mediaContent() %>

        <!-- Crypto button -->
        <% if (live.walletUrl) { %>
        <div class="flex justify-center">
          <a href="<%= live.walletUrl %>" target="_blank" rel="noopener noreferrer" class="bg-light-purple border border-[#3E21F3] cryptoButton text-blue-primary rounded-full transition-all ease-out duration-300 font-fira-mono font-medium tracking-wide px-4 py-2 sm:px-5 sm:py-3 hover:shadow-md cursor-pointer mx-auto sm:mx-0 uppercase text-sm sm:text-base">
            TIP <%= landing.fullName.trim().split(" ")[0] %> IN CRYPTO
          </a>
        </div>
        <% } %>

        <!-- Live Cards -->
        <% const validDetails = live.details.filter(item => item.title?.trim() && item.heading?.trim()); %>
        <% if (validDetails && validDetails.length > 0) { %>
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6 items-stretch">
          <% validDetails.forEach(item => { %>
            <div class="w-full h-full">
              <a href="<%= item.url %>" target="_blank" class="card-wrapper group cursor-pointer h-full">
                <div class="tag-box"><%= item.title %></div>
                <span class="heading-text"><%= item.heading %></span>
              </a>
            </div>
          <% }) %>
        </div>
        <% } %>
      </div>
    </section>

    <!-- Organizations Section -->
    <div class="px-4 py-10 bg-gray-100">
      <div class="max-w-[90rem] mx-auto flex flex-col gap-8 justify-center items-center">
        <div class="section-header">ORGANIZATIONS I SUPPORT</div>
        <section class="w-full flex flex-col md:flex-row gap-10 justify-center items-center">
          <% (organizations || []).forEach((org, index) => { %>
            <% if (org) { %>
            <img src="<%= org %>" alt="Organization <%= index + 1 %>" width="100" height="100" />
            <% } %>
          <% }) %>
        </section>
      </div>
    </div>

    <!-- Timeline Section -->
    <% const filteredTimeline = (timeline || []).filter(item => 
         (item.title && item.title.trim()) || 
         (item.from && item.from.trim()) || 
         (item.to && item.to.trim())
       ).sort((a, b) => {
         if (a.from.trim() && !b.from.trim()) return -1;
         if (!a.from.trim() && b.from.trim()) return 1;
         if (a.from.trim() && b.from.trim()) {
           const dateA = Number.parseInt(a.from.replace(/\D/g, "")) || 0;
           const dateB = Number.parseInt(b.from.replace(/\D/g, "")) || 0;
           return dateB - dateA;
         }
         return 0;
       }); %>
    
    <% if (filteredTimeline.length) { %>
    <div id="timeline" class="p-4 py-10">
      <section class="max-w-[90rem] mx-auto">
        <div class="flex justify-between items-center">
          <div class="section-header">TIMELINE</div>
          <img src="https://res.cloudinary.com/dv52zu7pu/image/upload/v1751386800/runes_ppyc4o.png" alt="" width="70" height="70" />
        </div>
        <% filteredTimeline.forEach((item, index) => { %>
        <div class="w-full py-4 flex font-bold justify-between items-center tracking-wide <%= index !== filteredTimeline.length - 1 ? 'border-b border-gray-300' : '' %>">
          <p class="font-dm-sans w-56 text-sm sm:text-lg font-semibold whitespace-nowrap text-[#3E21F3] flex items-center uppercase">
            <%= item.from %> <%= item.to ? ' - ' + item.to : '' %>
          </p>
          <span class="w-72 md:w-full uppercase text-sm sm:text-lg leading-6 font-sora font-medium">
            <%= item.title %>
          </span>
        </div>
        <% }) %>
      </section>
    </div>
    <% } %>

    <!-- People Section -->
    <div class="overflow-hidden bg-gray-900 py-3 px-4 flex items-center">
      <div class="people-ticker-track flex items-center font-sora gap-4" id="peopleScroller" style="white-space: nowrap">
        <!-- Content populated by JavaScript -->
      </div>
    </div>

    <!-- Available Section -->
    <% const cleanedAvailable = (available.availableFor || []).filter(item => item.trim() !== ""); %>
    <% if (cleanedAvailable.length || available.avatar) { %>
    <div id="connect" class="p-4 py-10">
      <div class="p-2 max-w-[90rem] mx-auto grid grid-cols-1 lg:grid-cols-2 gap-4 mt-4">
        <!-- Text Section -->
        <section class="flex flex-col justify-center items-center order-1 lg:order-2 space-y-6 lg:space-y-10 xxl:space-y-12 w-full">
          <div class="section-header">I'M AVAILABLE FOR</div>
          <div class="flex flex-col gap-4 justify-center items-center">
            <% cleanedAvailable.forEach(item => { %>
            <div class="fade-in-up transform transition-all text-[1.4rem] h-8 duration-300 hover:text-[#3E21F3] hover:text-[1.7rem] hover:font-semibold uppercase hover:tracking-wider flex justify-center items-center cursor-default">
              <%= item %>
            </div>
            <% }) %>
          </div>
        </section>

        <!-- Image Section -->
        <section class="flex flex-col gap-6 items-center w-full order-2 lg:order-1">
          <div>
            <% if (available.avatar && available.avatar !== "" && available.avatar !== "https://res.cloudinary.com/dv52zu7pu/image/upload/v1751386807/avatar_vpdoef.png") { %>
              <img src="<%= available.avatar %>" alt="" width="260" height="260" class="rounded-lg border border-[#3E21F3] object-cover" />
            <% } else { %>
              <img src="https://res.cloudinary.com/dv52zu7pu/image/upload/v1751741835/available_uqqfbn.svg" alt="" width="260" height="260" class="object-cover" />
            <% } %>
          </div>
          <a href="https://www.si3.space" target="_blank" rel="noopener noreferrer" class="bg-light-purple border border-[#3E21F3] cryptoButton text-blue-primary rounded-full transition-all ease-out duration-300 font-fira-mono font-medium tracking-wide px-4 py-2 sm:px-5 sm:py-3 hover:shadow-md cursor-pointer mx-auto sm:mx-0 uppercase text-sm sm:text-base">
            Join SI&lt;3&gt;
          </a>
        </section>
      </div>
    </div>
    <% } %>

    <!-- Info Section -->
    <div class="px-4 py-8 bg-primary text-xs">
      <div class="max-w-[90rem] mx-auto space-y-4 text-justify md:text-center leading-4">
        <p class="font-dm-sans text-sm">
          You are viewing an ENS domain, which is a distributed and open naming system based on the Ethereum blockchain. This website is hosted with Pinata on the IPFS, or InterPlanetary File System, which is a peer-to-peer file sharing network. The .link domain extension is a privacy-preserving ENS gateway for resolving/accessing ENS records/domains & IPFS/internet 3.0 content. For a complete web3 experience, we recommend viewing this site with a Metamask extension or Brave browser.
        </p>
        <p class="uppercase font-medium">
          This site has been built by SI&lt;3&gt; in support of the decentralized and democratized web.
        </p>
      </div>
    </div>

    <!-- Footer -->
    <div class="bg-gray-900 p-4 text-xs">
      <div class="max-w-[90rem] mx-auto space-y-2">
        <!-- Social & Controls -->
        <section class="flex flex-col md:flex-row justify-between items-start gap-3">
          <!-- Social Channels -->
          <% if (socialChannels && socialChannels.length > 0) { %>
          <div class="flex justify-between w-full md:justify-start gap-4">
            <% socialChannels.forEach(channel => { %>
              <% if (channel.url && channel.icon) { %>
            <a href="<%= channel.url %>" target="_blank" rel="noopener noreferrer" class="bg-[#C8BAFD] rounded-xl py-2 px-4 flex items-center justify-center font-semibold hover:bg-[#b0a0f5] transition gap-2 w-full md:w-fit">
              <img src="<%= channel.icon %>" alt="" width="20" height="20" />
            </a>
              <% } %>
            <% }) %>
          </div>
          <% } %>

          <!-- Controls -->
          <section class="flex flex-col sm:flex-row items-center justify-between md:justify-end w-full gap-4 items-start h-fit">
            <a href="https://www.si3.space/" target="_blank" rel="noopener noreferrer" class="bg-[#C8BAFD] tracking-wider px-3 py-3 rounded-xl hover:bg-[#b0a0f5] whitespace-nowrap font-sora font-semibold focus:outline-none w-full md:w-fit text-center">
              Join SI&lt;3&gt;
            </a>
            <button type="button" class="bg-[#C8BAFD] tracking-wider px-3 py-3 rounded-xl hover:bg-[#b0a0f5] whitespace-nowrap font-sora font-semibold focus:outline-none hidden lg:block">
              Select Language
            </button>
            <div class="w-full md:w-[320px]">
              <ethermail-subscribe
                widget="677f0f8f690e56d4d9800180"
                theme="light"
                on-mounted="setStyle"
                input="auto"
                wallet-connect-project-id="82b9193221afcff90a3e7b1d94e67505"
                rpc='{"http": "https://eth-mainnet.g.alchemy.com/v2/xrSkES28Vk2dzciw2ufA7ZE-UNjmnwpK"}'
                onclick="trackEvent('Email Subscribe Clicked', { method: 'Ethermail' })"
              ></ethermail-subscribe>
            </div>
          </section>
        </section>

        <!-- Footer Text -->
        <section class="font-sora font-normal leading-4 space-y-1 tracking-wider text-center text-white max-w-md mx-auto">
          <p>@2025 Solar Intelligence, Inc.</p>
          <p>All rights reserved.</p>
        </section>
      </div>
    </div>

    <script>
      function toggleMobileNav() {
        const nav = document.getElementById("mobileNav");
        const menuBtn = document.querySelector('[aria-label="Toggle menu"].md\\:hidden');
        const isOpen = !nav.classList.contains("translate-x-full");
        if (isOpen) {
          nav.classList.add("translate-x-full");
          menuBtn.style.display = "block";
        } else {
          nav.classList.remove("translate-x-full");
          menuBtn.style.display = "none";
        }
      }
      async function fetchPeople() {
        try {
          const response = await fetch("https://kara-backend.vercel.app/users");
          const users = await response.json();
          const peopleScroller = document.getElementById("peopleScroller");
          if (!peopleScroller || !users.length) return;
          const createUserElement = (user) => {
            const div = document.createElement("div");
            div.className = "flex items-center";
            div.innerHTML = `
              <div class="text-center flex w-max items-center px-3 text-white tracking-wider uppercase">
                <div class="size-12 relative">
                  <img src="${user.image || "https://static-00.iconduck.com/assets.00/profile-default-icon-2048x2045-u3j7s5nj.png"}"
                       alt=""
                       class="rounded-full object-cover w-full h-full" />
                </div>
                <div class="mx-4 text-left text-sm">
                  <p>${user.fullName || ""}</p>
                  ${user.domain ? `<a href="https://${user.domain}" target="_blank" rel="noreferrer" class="lowercase hover:underline underline-offset-2">${user.domain}</a>` : ""}
                </div>
              </div>
              <div class="bg-white size-2 rounded-full mx-4"></div>
            `;
            return div;
          };
          peopleScroller.innerHTML = "";

          // Always repeat enough times for seamless animation
          let allUsers = [];
          if (users.length === 1) {
            for (let i = 0; i < 8; i++) allUsers.push(users[0]);
          } else {
            allUsers = [...users, ...users];
          }
          allUsers.forEach(user => {
            peopleScroller.appendChild(createUserElement(user));
          });
        } catch (error) {
          console.error("Error fetching people:", error);
        }
      }
      document.addEventListener("DOMContentLoaded", fetchPeople);
      document.addEventListener("DOMContentLoaded", function () {
        function trackEvent(eventName, eventProps) {
          console.log("Tracking Event:", eventName, eventProps);
        }
        window.setStyle = function () {
          const element = document.querySelector("ethermail-subscribe");
          if (element && element.shadowRoot) {
            const style = document.createElement("style");
            style.textContent = `
              .input-web2 {
                background: white !important;
                border-radius: 12px 0 0 12px !important; /* Only left side rounded */
                height: 2.5rem !important;
                font-size: 0.75rem !important;
                font-family: 'DMSans', Arial, sans-serif !important;
                width: 100% !important;
                margin-right: 0 !important; /* Remove margin */
                outline: none !important;
                box-shadow: none !important;
                border: none !important;
                display: inline-block !important;
              }
              .input-web2:focus {
                outline: none !important;
                box-shadow: none !important;
              }
              button.subscribe {
                background-color: #C8BAFD !important;
                border-radius: 0 12px 12px 0 !important; /* Only right side rounded */
                width: 2.5rem !important;
                height: 2.5rem !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                transition: background-color 0.2s !important;
                padding: 0 !important;
                border: none !important;
                margin-left: -1px !important; /* Remove gap between input and button */
                color: transparent !important; /* Hide text */
                position: relative !important;
              }
              button.subscribe:hover {
                background-color: #b0a0f5 !important;
              }
              button.subscribe img {
                width: 1.2rem !important;
                height: 1.2rem !important;
                display: block !important;
                margin: 0 auto !important;
              }
            `;
            element.shadowRoot.appendChild(style);

            // Replace button text with Cloudinary icon
            const tryReplaceButtonIcon = () => {
              const btn = element.shadowRoot.querySelector('button.subscribe');
              if (btn) {
                btn.innerHTML = '<img src="https://res.cloudinary.com/dv52zu7pu/image/upload/v1752081204/right_vqq8bk.png" alt="Subscribe" />';
              } else {
                setTimeout(tryReplaceButtonIcon, 100);
              }
            };
            tryReplaceButtonIcon();

            // Change the input placeholder
            const trySetPlaceholder = () => {
              const input = element.shadowRoot.querySelector('.input-web2');
              if (input) {
                input.placeholder = 'Subscribe to newsletter';
              } else {
                setTimeout(trySetPlaceholder, 100);
              }
            };
            trySetPlaceholder();
          }
        };
        (function ({ ...args }) {
          if (!document.getElementById("ethermail-sdk-script")) {
            const p = document.createElement("script");
            p.id = "ethermail-sdk-script";
            p.src = "https://cdn-email.ethermail.io/sdk/v2/ethermail.js";
            document.body.appendChild(p);
            p.setAttribute("a", args.afid);
            p.setAttribute("b", args.communityAlias);
            p.setAttribute("c", args.features);
          }
        })({
          afid: "67353ab1f14dc512c8f225ef",
          communityAlias: "si3",
          features: ["subscribe"],
        });
        const addCustomContent = () => {
          const targetDiv = document.getElementById(
            "ethermail-md-success-modal-content"
          );
          if (targetDiv) {
            if (!document.getElementById("custom-modal-content")) {
              const newDiv = document.createElement("div");
              newDiv.id = "custom-modal-content";
              newDiv.innerHTML = `
                <div id="subscription-footer">
                  <svg class="subscribe-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 4H20C21.1 4 22 4.9 22 6V18C22 19.1 21.1 20 20 20H4C2.9 20 2 19.1 2 18V6C2 4.9 2.9 4 4 4ZM20 6L12 11L4 6V18H20V6ZM4 6V6.01V6Z" fill="white"/>
                  </svg>
                  <p class="subscribe-text">Thanks for Subscribing.</p>
                  <span class="subscribe-emoji">ðŸ™Œ</span>
                </div>`;
              targetDiv.appendChild(newDiv);
            }
          }
        };
        const observer = new MutationObserver(() => addCustomContent());
        observer.observe(document.body, { childList: true, subtree: true });
      });
    </script>
  </body>
</html>
